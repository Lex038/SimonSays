<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8">
<title>Simon Says — De Haan</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root{--bg1:#000;--bg2:#070707;--red:#ff3b3b}
body{
  margin:0;font-family:"Trebuchet MS",Arial,sans-serif;
  background:radial-gradient(circle at center,var(--bg1) 0%,var(--bg2) 100%);
  color:#eee;text-align:center;overflow:hidden;transition:transform .1s;
  -webkit-tap-highlight-color:transparent;
}
#haan-bg{
  position:fixed; inset:0;
  background:url('https://upload.wikimedia.org/wikipedia/commons/2/2e/Rooster_silhouette.svg') no-repeat center/contain;
  opacity:0.06; filter:drop-shadow(0 0 6px rgba(255,0,0,0.15));
  z-index:1; pointer-events:none;
  transition:opacity 1s, transform 1s, filter 1s;
  transform:scale(1);
  animation: haanFloat 6s ease-in-out infinite;
}
#haan-bg.come-forward{
  opacity:0.42; transform:scale(1.05) translateY(-8%);
  filter:drop-shadow(0 0 40px rgba(255,10,10,0.35));
}
@keyframes haanFloat{
  0%{transform:translateY(0) rotate(0deg);opacity:0.06}
  25%{transform:translateY(-2%) rotate(1deg);opacity:0.08}
  50%{transform:translateY(0) rotate(0deg);opacity:0.06}
  75%{transform:translateY(2%) rotate(-1deg);opacity:0.08}
  100%{transform:translateY(0) rotate(0deg);opacity:0.06}
}
#red-eye{
  position: fixed;
  width: 30px;              /* kleiner */
  height: 30px;
  border-radius: 50%;
  background: rgba(255,0,0,0.35);
  filter: blur(2px);        /* scherper */
  opacity: 0;
  z-index: 9999;
  pointer-events: none;
  transition: opacity 3s ease; /* langzaam knipperen */
  left: 50%;
  top: 50%;
  transform: translate(-50%,-50%);
}
#password-screen{
  position:fixed; inset:0; display:flex; flex-direction:column;
  align-items:center; justify-content:center; z-index:14;
  background:radial-gradient(circle at center,rgba(0,0,0,0.8) 0%,rgba(0,0,0,0.95) 100%);
  padding:24px; box-sizing:border-box;
}
#password-screen input{
  width:220px; padding:10px; font-size:16px; border-radius:8px; border:none;
  background:#111; color:#fff; text-align:center; outline:none;
  box-shadow:0 0 12px rgba(255,0,0,0.06);
}
#password-screen .btn{
  margin-top:12px; padding:10px 18px; border-radius:8px; border:none; cursor:pointer;
  background:#a00; color:#fff; font-size:16px; transition:transform .12s, background .18s;
}
#password-screen .btn:hover{transform:scale(1.03); background:#c22;}
#password-error{color:#ff8b8b; margin-top:10px; display:none;}
#portal{
  position:fixed; top:50%; left:50%; width:120px; height:120px; border-radius:50%;
  transform:translate(-50%,-50%) scale(0); border:4px solid rgba(255,50,50,0.9);
  box-shadow:0 0 40px 18px rgba(255,40,40,0.12); z-index:30; pointer-events:none; opacity:0;
}
#portal.active{animation:portalOpen 1.6s forwards;}
@keyframes portalOpen{
  0%{transform:translate(-50%,-50%) scale(0); opacity:0}
  30%{transform:translate(-50%,-50%) scale(1.1); opacity:1}
  60%{transform:translate(-50%,-50%) scale(1.8) rotate(180deg); opacity:.95}
  100%{transform:translate(-50%,-50%) scale(3) rotate(360deg); opacity:0}
}
#energy-wave{
  position:fixed; inset:0; z-index:25; pointer-events:none; opacity:0;
  background:radial-gradient(circle at 50% 48%,rgba(255,80,80,0.12),transparent 40%);
}
#energy-wave.active{animation:energySweep 1.6s ease-out forwards;}
@keyframes energySweep{
  0%{transform:scale(.6);opacity:0}
  30%{transform:scale(1.2);opacity:.6}
  60%{transform:scale(2);opacity:.35}
  100%{transform:scale(3.5);opacity:0}
}
#red-flash{
  position:fixed; inset:0; background:rgba(255,0,0,0.25);
  z-index:100; pointer-events:none; opacity:0;
}
#red-flash.active{animation:redflash .45s;}
@keyframes redflash{0%{opacity:.8}50%{opacity:.9}100%{opacity:0}}
#game-container{display:none;z-index:5;position:relative;padding:22px;}
#game{
  display:grid; grid-template-columns:repeat(2,140px); grid-template-rows:repeat(2,140px);
  gap:14px; justify-content:center; margin:26px auto;
}
.btn{width:140px;height:140px;border-radius:14px;opacity:.86;cursor:pointer;
  transition:transform .14s, box-shadow .18s, opacity .12s;
  box-shadow:0 3px 6px rgba(0,0,0,0.35);
}
#green{background:#00b894} #red{background:#d63031} #yellow{background:#fdcb6e} #blue{background:#0984e3}
.btn.active{transform:scale(1.08);opacity:1;box-shadow:0 6px 20px rgba(255,255,255,0.09)}
#controls{margin-top:10px;}
#progress{width:78%;height:18px;background:#222;border-radius:10px;margin:14px auto;overflow:hidden;}
#progress-bar{height:100%;width:0;background:linear-gradient(90deg,#ff3b3b,#ffa500);transition:width .3s;}
#status{margin-top:8px;font-size:16px;min-height:28px;}
#status.sparkle{animation:sparkle 2s infinite alternate;color:#fff;text-shadow:0 0 6px #ffaeae,0 0 12px #ff7b7b;}
@keyframes sparkle{from{filter:hue-rotate(0deg);}to{filter:hue-rotate(360deg);}}
@media (max-width:420px){
  #game{grid-template-columns:repeat(2,120px);grid-template-rows:repeat(2,120px);gap:10px;}
  .btn{width:120px;height:120px;border-radius:12px;}
}
</style>
</head>
<body>

<div id="haan-bg"></div>
<div id="red-eye"></div>
<div id="red-flash"></div>
<div id="portal"></div>
<div id="energy-wave"></div>

<div id="password-screen">
  <input id="password-input" type="password" placeholder="Wachtwoord" autocomplete="off"/>
  <button class="btn" onclick="checkPassword()">Verder</button>
  <div id="password-error">❌ Onjuist wachtwoord...</div>
</div>

<div id="game-container">
  <h2>Simon Says</h2>
  <div id="game">
    <div id="green" class="btn"></div>
    <div id="red" class="btn"></div>
    <div id="yellow" class="btn"></div>
    <div id="blue" class="btn"></div>
  </div>
  <div id="controls"><button onclick="startGame()">▶️ Start</button></div>
  <div id="progress"><div id="progress-bar"></div></div>
  <div id="status">Druk op Start om te beginnen</div>
</div>

<script>
const correctPassword="noordkromp";
const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
const buttons=["green","red","yellow","blue"];
let sequence=[],playerSequence=[],level=0,gameActive=false;
const goalLevel=18;
const sounds={green:440,red:523.25,yellow:659.26,blue:830.61};
const waveforms={green:"sine",red:"square",yellow:"triangle",blue:"sawtooth"};
let inGame=false;

/* Oog animatie met subtiele jitter */
let eyeInterval;
function startEyeAnimation() {
  const eye = document.getElementById("red-eye");
  if (!eye) return;
  eye.style.opacity = 0;

  function blinkAndMove() {
    const margin = 40; 
    const edge = Math.floor(Math.random() * 4);
    let x = 0, y = 0;

    switch(edge){
      case 0: x = Math.random()*margin; y = Math.random()*window.innerHeight; break; // links
      case 1: x = Math.random()*window.innerWidth; y = Math.random()*margin; break; // boven
      case 2: x = window.innerWidth - margin - 30; y = Math.random()*window.innerHeight; break; // rechts
      case 3: x = Math.random()*window.innerWidth; y = window.innerHeight - margin - 30; break; // onder
    }

    eye.style.left = x+"px";
    eye.style.top = y+"px";
    eye.style.opacity = 1;
    eye.style.transition = "opacity 3s ease";

    // subtiele jitter
    let jitterCount = 0;
    const jitterInterval = setInterval(()=>{
      const dx = (Math.random()-0.5)*6; // max ±3px
      const dy = (Math.random()-0.5)*6;
      eye.style.transform = `translate(-50%, -50%) translate(${dx}px, ${dy}px)`;
      jitterCount++;
      if(jitterCount>8){ 
        clearInterval(jitterInterval); 
        eye.style.transform="translate(-50%,-50%)"; 
      }
    }, 300);

    setTimeout(()=>{ 
      eye.style.opacity=0; 
      eye.style.transform="translate(-50%,-50%)";
    }, 3000);

    const nextTime = inGame ? 25000 + Math.random()*15000 : 12000 + Math.random()*8000;
    clearInterval(eyeInterval);
    eyeInterval = setInterval(blinkAndMove, nextTime);
  }

  blinkAndMove();
}

function stopEyeAnimation(){
  clearInterval(eyeInterval);
  const eye = document.getElementById("red-eye");
  if(eye) eye.style.opacity=0;
}

startEyeAnimation();

/* Wachtwoordcontrole */
function checkPassword(){
  const input=document.getElementById("password-input");
  const error=document.getElementById("password-error");
  const portal=document.getElementById("portal");
  const wave=document.getElementById("energy-wave");
  const haan=document.getElementById("haan-bg");
  if(input.value.trim().toLowerCase()===correctPassword){
    if(audioCtx.state==="suspended") audioCtx.resume();
    portal.classList.add("active");
    wave.classList.add("active");
    haan.classList.add("come-forward");
    stopEyeAnimation();
    if(navigator.vibrate) navigator.vibrate([200,100,200,100,200]);
    const screen=document.getElementById("password-screen");
    screen.style.transition="opacity 1.2s, transform 1.2s";
    screen.style.opacity=0; screen.style.transform="scale(1.05)";
    setTimeout(()=>{
      screen.style.display="none";
      const gameContainer=document.getElementById("game-container");
      gameContainer.style.display="block";
      inGame=true; startEyeAnimation();
      setTimeout(()=>{portal.classList.remove("active");wave.classList.remove("active");},1700);
    },1200);
  }else{
    if(audioCtx.state==="suspended") audioCtx.resume();
    playCreepyError();
    if(navigator.vibrate) navigator.vibrate([120]);
    document.getElementById("red-flash").classList.add("active");
    error.style.display="block";
    setTimeout(()=>{document.getElementById("red-flash").classList.remove("active");},600);
  }
}

/* Geluiden */
function playSound(color){
  const now=audioCtx.currentTime;
  const o=audioCtx.createOscillator(); const g=audioCtx.createGain();
  o.type=waveforms[color]; o.frequency.setValueAtTime(sounds[color],now);
  g.gain.setValueAtTime(0.22,now); g.gain.exponentialRampToValueAtTime(0.001,now+0.55);
  o.connect(g).connect(audioCtx.destination);
  o.start(now); o.stop(now+0.55);
}
function playCreepyError(){
  const now=audioCtx.currentTime;
  for(let i=0;i<6;i++){
    const o=audioCtx.createOscillator(); const g=audioCtx.createGain();
    o.type="sawtooth";
    o.frequency.setValueAtTime(120+Math.random()*220,now+i*0.05);
    g.gain.setValueAtTime(0.18,now+i*0.05);
    g.gain.exponentialRampToValueAtTime(0.001,now+i*0.05+0.18);
    o.connect(g).connect(audioCtx.destination);
    o.start(now+i*0.05); o.stop(now+i*0.05+0.18);
  }
}
function playGameError(){
  const now=audioCtx.currentTime;
  const o=audioCtx.createOscillator(); const g=audioCtx.createGain();
  o.type="sawtooth"; o.frequency.setValueAtTime(150,now);
  o.frequency.exponentialRampToValueAtTime(60,now+0.28);
  g.gain.setValueAtTime(0.32,now);
  g.gain.exponentialRampToValueAtTime(0.001,now+0.28);
  o.connect(g).connect(audioCtx.destination);
  o.start(now); o.stop(now+0.28);
}
function playVictorySound(){
  const now=audioCtx.currentTime; const freqs=[220,330,440];
  freqs.forEach((f,i)=>{
    const o=audioCtx.createOscillator(); const g=audioCtx.createGain();
    o.type="triangle"; o.frequency.setValueAtTime(f,now+i*0.12);
    g.gain.setValueAtTime(0.22,now+i*0.12);
    g.gain.exponentialRampToValueAtTime(0.001,now+i*0.12+0.9);
    o.connect(g).connect(audioCtx.destination);
    o.start(now+i*0.12); o.stop(now+i*0.12+0.9);
  });
}

/* Simon Says */
function startGame(){
  sequence=[];playerSequence=[];level=0;gameActive=true;updateProgress();nextRound();
}
function nextRound(){
  if(!gameActive)return;
  playerSequence=[];level++;
  document.getElementById("status").textContent="Level "+level;
  updateProgress();
  if(level>goalLevel){
    gameActive=false;
    playVictorySound();
    if(navigator.vibrate) navigator.vibrate([100,100,100,300]);
    const st=document.getElementById("status");
    st.textContent="Je hebt het raadsel onthuld!";
    st.classList.add("sparkle");
    setTimeout(()=>{
      alert("Wanneer de klok negen slaat en avond in het duister baadt,\nverschijnt de haan met vurig kam, die waakt waar voor hem stilte kwam.\nWie hem ontmoet op 't uur der nacht, zal dragen last tot morgengracht.");
    },200);
    return;
  }
  sequence.push(buttons[Math.floor(Math.random()*4)]);
  playSequence();
}
function playSequence(){
  let i=0;
  const interval=setInterval(()=>{
    highlight(sequence[i]); playSound(sequence[i]); i++;
    if(i>=sequence.length) clearInterval(interval);
  },250);
}
function highlight(color){
  const el=document.getElementById(color);
  if(!el)return;
  el.classList.add("active");
  setTimeout(()=>el.classList.remove("active"),225);
}
document.querySelectorAll(".btn").forEach(btn=>{
  btn.addEventListener("click",e=>{
    if(!gameActive)return;
    const color=e.currentTarget.id;
    playerSequence.push(color);
    highlight(color); playSound(color);
    checkInput();
  });
});
function checkInput(){
  const idx=playerSequence.length-1;
  if(playerSequence[idx]!==sequence[idx]){
    document.getElementById("status").textContent="❌ Fout! Probeer opnieuw.";
    playGameError();
    if(navigator.vibrate) navigator.vibrate([120,80,120]);
    gameActive=false;
    return;
  }
  if(playerSequence.length===sequence.length){
    setTimeout(nextRound,350);
  }
}
function updateProgress(){
  const progress=Math.min(level/goalLevel*100,100);
  document.getElementById("progress-bar").style.width=progress+"%";
}
document.addEventListener("click",function resumeOnce(){
  if(audioCtx.state==="suspended") audioCtx.resume();
  document.removeEventListener("click",resumeOnce);
});
document.getElementById("password-input").addEventListener("keydown",e=>{
  if(e.key==="Enter") checkPassword();
});
</script>
</body>
</html>
