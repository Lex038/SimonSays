<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simon Says - De Haan</title>
<style>
body {
  margin:0; font-family:'Trebuchet MS', sans-serif;
  background-color:#050505; color:#f5f5f5; overflow:hidden;
}

/* Wachtwoordscherm */
#password-screen {
  position: fixed; inset:0;
  background: radial-gradient(circle at center, #1a0000 0%, #000 100%);
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:1rem;
  z-index:10; transition: opacity 1s ease;
}
#password-input { padding:10px; font-size:1rem; border:none; border-radius:8px; text-align:center; outline:none; }
#password-btn { padding:10px 20px; background:#550000; color:white; border:none; border-radius:8px; cursor:pointer; transition:0.3s;}
#password-btn:hover{ background:#770000; }

/* Simon Says */
#game { display:none; text-align:center; padding-top:2rem;}
#board { display:grid; grid-template-columns:repeat(2,120px); grid-template-rows:repeat(2,120px); gap:20px; justify-content:center; margin:2rem auto; }
.tile { border-radius:15px; cursor:pointer; opacity:0.8; transition:opacity 0.2s, transform 0.2s;}
.tile:active{ transform:scale(0.95);}
#green{background:#00b300;} #red{background:#e60000;} #yellow{background:#e6e600;} #blue{background:#004de6;}

#start-btn { padding:10px 20px; border-radius:8px; border:none; cursor:pointer; background:#880000; color:white; margin-top:10px;}
#start-btn:hover{background:#aa0000;}

/* Progress bar */
#progress-container { width:80%; height:20px; background:#222; border-radius:10px; margin:1rem auto; overflow:hidden;}
#progress-bar { height:100%; width:0%; background:linear-gradient(90deg,#ff3b3b,#ff9900); transition: width 0.3s;}

/* Victory popup */
#victory-popup { position:fixed; inset:0; background: rgba(0,0,0,0.95); color:#ffcccc; font-size:1.2rem; display:flex; align-items:center; justify-content:center; text-align:center; padding:2rem; z-index:20; opacity:0; visibility:hidden; transition:opacity 2s;}
#victory-popup.active{opacity:1; visibility:visible; animation:glowText 3s ease-in-out infinite alternate;}
@keyframes glowText { 0%{text-shadow:0 0 10px #ff0000;} 100%{text-shadow:0 0 30px #ff4444;}}

/* Rode oog */
#red-eye { position:fixed; width:25px; height:25px; border-radius:50%;
  background:radial-gradient(circle, rgba(255,0,0,1) 0%, rgba(255,40,40,0.6) 35%, rgba(120,0,0,0.2) 65%, transparent 100%);
  box-shadow:0 0 15px 6px rgba(255,0,0,0.3);
  opacity:0; z-index:9999; pointer-events:none; transition:opacity 3s ease; animation:eyePulse 4s ease-in-out infinite;}
@keyframes eyePulse {0%,100%{transform:scale(1); box-shadow:0 0 15px 5px rgba(255,0,0,0.3);}50%{transform:scale(1.15); box-shadow:0 0 25px 10px rgba(255,0,0,0.5);}}

/* Portaal effect */
#portal { position:fixed; top:50%; left:50%; width:100px; height:100px; border-radius:50%; border:4px solid rgba(255,0,0,0.9); box-shadow:0 0 40px 18px rgba(255,0,0,0.12); transform:translate(-50%,-50%) scale(0); opacity:0; z-index:30; pointer-events:none;}
#portal.active{animation:portalOpen 1.6s forwards;}
@keyframes portalOpen{0%{transform:translate(-50%,-50%) scale(0); opacity:0}30%{transform:translate(-50%,-50%) scale(1.1); opacity:1}60%{transform:translate(-50%,-50%) scale(1.8) rotate(180deg); opacity:.95}100%{transform:translate(-50%,-50%) scale(3) rotate(360deg); opacity:0}}
</style>
</head>
<body>

<div id="password-screen">
  <h2>Voer het wachtwoord in...</h2>
  <input id="password-input" type="password" placeholder="wachtwoord">
  <button id="password-btn">Verder</button>
</div>

<div id="game">
  <h1>Simon Says</h1>
  <div id="board">
    <div id="green" class="tile"></div>
    <div id="red" class="tile"></div>
    <div id="yellow" class="tile"></div>
    <div id="blue" class="tile"></div>
  </div>
  <div id="progress-container"><div id="progress-bar"></div></div>
  <button id="start-btn">Start</button>
</div>

<div id="victory-popup">
  <p>Wanneer de klok negen slaat en avond in het duister baadt,<br>
  verschijnt de haan met vurig kam, die waakt waar voor hem stilte kwam.<br>
  Wie hem ontmoet op 't uur der nacht,<br>
  zal dragen last tot morgengracht.</p>
</div>

<div id="red-eye"></div>
<div id="portal"></div>

<script>
const correctPassword="noordkromp";
const eye = document.getElementById("red-eye");
const portal = document.getElementById("portal");
const passwordScreen = document.getElementById("password-screen");
const passwordInput = document.getElementById("password-input");
const passwordBtn = document.getElementById("password-btn");
const game = document.getElementById("game");
const startBtn = document.getElementById("start-btn");
const progressBar = document.getElementById("progress-bar");
const popup = document.getElementById("victory-popup");
const tiles = ["green","red","yellow","blue"];
const sounds = {green:440, red:523.25, yellow:659.26, blue:830.61};
const waveforms = {green:"sine", red:"sine", yellow:"sine", blue:"sine"};
let audioCtx = new (window.AudioContext || window.webkitAudioContext)();
let sequence=[], playerSequence=[], level=0, inGame=false, eyeInterval;

function startEyeAnimation() {
  function blinkAndMove() {
    const margin = 40; 
    const edge = Math.floor(Math.random()*4);
    let x=0, y=0;
    switch(edge){
      case 0: x=Math.random()*margin; y=Math.random()*window.innerHeight; break;
      case 1: x=Math.random()*window.innerWidth; y=Math.random()*margin; break;
      case 2: x=window.innerWidth-margin-30; y=Math.random()*window.innerHeight; break;
      case 3: x=Math.random()*window.innerWidth; y=window.innerHeight-margin-30; break;
    }
    eye.style.left=x+"px"; eye.style.top=y+"px"; eye.style.opacity=1;
    setTimeout(()=>{eye.style.opacity=0;},4000);
    const nextTime = inGame ? 30000 + Math.random()*15000 : 15000 + Math.random()*10000;
    clearInterval(eyeInterval);
    eyeInterval=setInterval(blinkAndMove,nextTime);
  }
  blinkAndMove();
}

startEyeAnimation();

passwordBtn.addEventListener("click",()=>{
  const pw=passwordInput.value.trim().toLowerCase();
  if(pw===correctPassword){
    navigator.vibrate([100,50,100,200,150]);
    passwordScreen.style.opacity=0;
    portal.classList.add("active");
    if(navigator.vibrate) navigator.vibrate([200,100,200]);
    setTimeout(()=>{
      passwordScreen.style.display="none";
      game.style.display="block";
      inGame=true;
    },1600);
  } else {
    navigator.vibrate([300,100,300]);
    const osc=audioCtx.createOscillator(); const gain=audioCtx.createGain();
    osc.frequency.value=100; osc.type="sawtooth"; gain.gain.setValueAtTime(0.1,audioCtx.currentTime);
    osc.connect(gain).connect(audioCtx.destination);
    osc.start(); osc.stop(audioCtx.currentTime+0.3);
  }
});

tiles.forEach(t=>{
  document.getElementById(t).addEventListener("click",()=>playerClick(t));
});

startBtn.addEventListener("click",startGame);

function playSound(color){
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.type = waveforms[color];
  osc.frequency.value = sounds[color];
  gain.gain.setValueAtTime(0.1,audioCtx.currentTime);
  osc.connect(gain).connect(audioCtx.destination);
  osc.start(); osc.stop(audioCtx.currentTime+0.3);
}

function flash(color){
  const el=document.getElementById(color);
  el.style.opacity=1; playSound(color);
  setTimeout(()=>el.style.opacity=0.8,200);
}

function startGame(){
  sequence=[]; playerSequence=[]; level=0;
  progressBar.style.width="0%";
  nextLevel();
}

function nextLevel(){
  playerSequence=[]; level++;
  sequence.push(tiles[Math.floor(Math.random()*4)]);
  playSequence();
}

function playSequence(){
  let i=0;
  const interval=setInterval(()=>{
    flash(sequence[i]); i++;
    if(i>=sequence.length) clearInterval(interval);
  },400);
}

function playerClick(color){
  playerSequence.push(color); playSound(color);
  const idx=playerSequence.length-1;
  if(playerSequence[idx]!==sequence[idx]){ gameOver(); return; }
  if(playerSequence.length===sequence.length){
    progressBar.style.width=(level/18*100)+"%";
    if(level===18){ gameWin(); return; } else { setTimeout(nextLevel,500); }
  } else { progressBar.style.width=(level-1+playerSequence.length/sequence.length)/18*100+"%"; }
}

function gameOver(){
  navigator.vibrate([500,100,500]);
  const osc=audioCtx.createOscillator(); const gain=audioCtx.createGain();
  osc.frequency.value=120; osc.type="triangle"; gain.gain.setValueAtTime(0.1,audioCtx.currentTime);
  osc.connect(gain).connect(audioCtx.destination); osc.start(); osc.stop(audioCtx.currentTime+0.4);
  sequence=[]; playerSequence=[]; level=0; progressBar.style.width="0%";
}

function gameWin(){
  popup.classList.add("active");
  navigator.vibrate([200,100,200,100,250]);
  const osc=audioCtx.createOscillator(); const gain=audioCtx.createGain();
  osc.type="sine"; osc.frequency.setValueAtTime(440,audioCtx.currentTime);
  gain.gain.setValueAtTime(0.1,audioCtx.currentTime);
  osc.connect(gain).connect(audioCtx.destination);
  osc.start(); osc.frequency.linearRampToValueAtTime(880,audioCtx.currentTime+2);
  osc.stop(audioCtx.currentTime+3);
}
</script>
</body>
</html>
