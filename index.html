<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simon Says</title>
<style>
  body {
    margin: 0;
    font-family: 'Trebuchet MS', sans-serif;
    background-color: #050505;
    color: #f5f5f5;
    overflow: hidden;
  }

  /* --- WACHTWOORDSCHERM --- */
  #password-screen {
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    background: radial-gradient(circle at center, #1a0000 0%, #000 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    z-index: 10;
    transition: opacity 1s ease;
  }

  #password-input {
    padding: 10px;
    font-size: 1rem;
    border: none;
    border-radius: 8px;
    outline: none;
    text-align: center;
  }

  #password-btn {
    padding: 10px 20px;
    background-color: #550000;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  #password-btn:hover { background-color: #770000; }

  /* --- SIMON SAYS --- */
  #game {
    display: none;
    text-align: center;
    padding-top: 2rem;
  }

  #board {
    display: grid;
    grid-template-columns: repeat(2, 120px);
    grid-template-rows: repeat(2, 120px);
    gap: 20px;
    justify-content: center;
    margin: 2rem auto;
  }

  .tile {
    border-radius: 15px;
    cursor: pointer;
    opacity: 0.8;
    transition: opacity 0.2s, transform 0.2s;
  }

  .tile:active {
    transform: scale(0.95);
  }

  #green { background-color: #00b300; }
  #red { background-color: #e60000; }
  #yellow { background-color: #e6e600; }
  #blue { background-color: #004de6; }

  /* --- POPUP --- */
  #victory-popup {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.95);
    color: #ffcccc;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 2rem;
    z-index: 20;
    opacity: 0;
    visibility: hidden;
    transition: opacity 2s ease;
  }

  #victory-popup.active {
    opacity: 1;
    visibility: visible;
    animation: glowText 3s ease-in-out infinite alternate;
  }

  @keyframes glowText {
    0% { text-shadow: 0 0 10px #ff0000; }
    100% { text-shadow: 0 0 30px #ff4444; }
  }

  /* --- RODE OOG --- */
  #red-eye {
    position: fixed;
    width: 25px;
    height: 25px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,0,0,1) 0%, rgba(255,40,40,0.6) 35%, rgba(120,0,0,0.2) 65%, transparent 100%);
    box-shadow: 0 0 15px 6px rgba(255,0,0,0.3);
    opacity: 0;
    z-index: 9999;
    pointer-events: none;
    transition: opacity 3s ease;
    animation: eyePulse 4s ease-in-out infinite;
  }

  @keyframes eyePulse {
    0%, 100% { transform: scale(1); box-shadow: 0 0 15px 5px rgba(255,0,0,0.3); }
    50% { transform: scale(1.15); box-shadow: 0 0 25px 10px rgba(255,0,0,0.5); }
  }

</style>
</head>
<body>

<div id="password-screen">
  <h2>Voer het wachtwoord in...</h2>
  <input id="password-input" type="password" placeholder="wachtwoord">
  <button id="password-btn">Verder</button>
</div>

<div id="game">
  <h1>Simon Says</h1>
  <div id="board">
    <div id="green" class="tile"></div>
    <div id="red" class="tile"></div>
    <div id="yellow" class="tile"></div>
    <div id="blue" class="tile"></div>
  </div>
  <button id="start-btn">Start</button>
</div>

<div id="victory-popup">
  <div>
    <p>Wanneer de klok negen slaat en avond in het duister baadt,<br>
    verschijnt de haan met vurig kam, die waakt waar voor hem stilte kwam.<br>
    Wie hem ontmoet op 't uur der nacht,<br>
    zal dragen last tot morgengracht.</p>
  </div>
</div>

<div id="red-eye"></div>

<script>
let inGame = false;
const passwordBtn = document.getElementById("password-btn");
const passwordInput = document.getElementById("password-input");
const passwordScreen = document.getElementById("password-screen");
const game = document.getElementById("game");
const popup = document.getElementById("victory-popup");
const eye = document.getElementById("red-eye");

passwordBtn.addEventListener("click", () => {
  const pw = passwordInput.value.trim().toLowerCase();
  if (pw === "noordkromp") {
    navigator.vibrate([100,50,100,200,150]);
    passwordScreen.style.opacity = 0;
    setTimeout(() => {
      passwordScreen.style.display = "none";
      game.style.display = "block";
      inGame = true;
    }, 1000);
  } else {
    navigator.vibrate([300,100,300]);
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    osc.frequency.value = 100;
    osc.type = "sawtooth";
    const gain = ctx.createGain();
    gain.gain.setValueAtTime(0.1, ctx.currentTime);
    osc.connect(gain).connect(ctx.destination);
    osc.start();
    osc.stop(ctx.currentTime + 0.3);
  }
});

/* --- SIMON SAYS --- */
const tiles = ["green", "red", "yellow", "blue"];
let sequence = [];
let playerSequence = [];
let level = 0;

const sounds = {
  green: 440.00,  // C5
  red: 523.25,    // D5
  yellow: 659.26, // E5
  blue: 830.61    // G#5
};

function playSound(color) {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  osc.type = "sine";
  osc.frequency.value = sounds[color];
  gain.gain.setValueAtTime(0.1, ctx.currentTime);
  osc.connect(gain).connect(ctx.destination);
  osc.start();
  osc.stop(ctx.currentTime + 0.3);
}

function flash(tile) {
  const el = document.getElementById(tile);
  el.style.opacity = 1;
  playSound(tile);
  setTimeout(() => el.style.opacity = 0.8, 200);
}

function nextRound() {
  playerSequence = [];
  level++;
  const nextColor = tiles[Math.floor(Math.random() * 4)];
  sequence.push(nextColor);
  playSequence();
}

function playSequence() {
  let i = 0;
  const interval = setInterval(() => {
    flash(sequence[i]);
    i++;
    if (i >= sequence.length) clearInterval(interval);
  }, 400); // 2x sneller
}

function checkSequence(tile) {
  playerSequence.push(tile);
  playSound(tile);
  const current = playerSequence.length - 1;
  if (playerSequence[current] !== sequence[current]) {
    navigator.vibrate([500,100,500]);
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    osc.frequency.value = 120;
    osc.type = "triangle";
    const gain = ctx.createGain();
    gain.gain.setValueAtTime(0.1, ctx.currentTime);
    osc.connect(gain).connect(ctx.destination);
    osc.start();
    osc.stop(ctx.currentTime + 0.4);
    resetGame();
    return;
  }
  if (playerSequence.length === sequence.length) {
    if (sequence.length === 18) {
      navigator.vibrate([200,100,200,400]);
      showVictory();
    } else {
      setTimeout(nextRound, 800);
    }
  }
}

function resetGame() {
  sequence = [];
  playerSequence = [];
  level = 0;
}

function showVictory() {
  popup.classList.add("active");
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  osc.type = "sine";
  osc.frequency.setValueAtTime(440, ctx.currentTime);
  gain.gain.setValueAtTime(0.1, ctx.currentTime);
  osc.connect(gain).connect(ctx.destination);
  osc.start();
  osc.frequency.linearRampToValueAtTime(880, ctx.currentTime + 2);
  osc.stop(ctx.currentTime + 3);
}

document.getElementById("start-btn").addEventListener("click", () => {
  resetGame();
  nextRound();
});

tiles.forEach(tile => {
  document.getElementById(tile).addEventListener("click", () => checkSequence(tile));
});

/* --- RODE OOG --- */
let eyeInterval;

function startEyeAnimation() {
  if (!eye) return;
  eye.style.opacity = 0;

  function blinkAndMove() {
    const margin = 40; 
    const edge = Math.floor(Math.random() * 4);
    let x = 0, y = 0;

    switch(edge){
      case 0: x = Math.random()*margin; y = Math.random()*window.innerHeight; break;
      case 1: x = Math.random()*window.innerWidth; y = Math.random()*margin; break;
      case 2: x = window.innerWidth - margin - 30; y = Math.random()*window.innerHeight; break;
      case 3: x = Math.random()*window.innerWidth; y = window.innerHeight - margin - 30; break;
    }

    eye.style.left = x + "px";
    eye.style.top = y + "px";
    eye.style.opacity = 1;
    setTimeout(()=>{ eye.style.opacity = 0; }, 4000);

    const nextTime = inGame 
      ? 30000 + Math.random()*15000
      : 15000 + Math.random()*10000;
    clearInterval(eyeInterval);
    eyeInterval = setInterval(blinkAndMove, nextTime);
  }

  blinkAndMove();
}

function stopEyeAnimation(){
  clearInterval(eyeInterval);
  if(eye) eye.style.opacity = 0;
}

startEyeAnimation();
</script>
</body>
</html>
